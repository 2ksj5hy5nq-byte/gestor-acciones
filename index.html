<script type="module">
  // firebase sdk (cdn)
  import { initializeapp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
  import { getauth, signinanonymously } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
  import { getfirestore } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

  // configuración firebase
  const firebaseconfig = {
    apikey: "AIzaSyD3XGLrrvUTNHHqk8P0gU8ROeyKBApig7o",
    authdomain: "gestor-acciones.firebaseapp.com",
    projectid: "gestor-acciones",
    storagebucket: "gestor-acciones.firebasestorage.app",
    messagingsenderid: "682376422747",
    appid: "1:682376422747:web:ec250f93ad6219eb2ce67e"
  };

  // iniciar firebase
  const app = initializeapp(firebaseconfig);

  // auth y firestore
  const auth = getauth(app);
  const db = getfirestore(app);

  // login anónimo automático
  signinanonymously(auth)
    .then(() => {
      console.log("usuario autenticado correctamente");
    })
    .catch((error) => {
      console.error("error de autenticación:", error);
      alert("error de autenticación con firebase");
    });

  // hacer disponibles globalmente
  window.db = db;
</script>
